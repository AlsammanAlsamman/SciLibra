#:kivy 1.11.0
#:import Factory kivy.factory.Factory

############# Menu Bar ################

# load files from kv folder

#:include kv/MenuBar.kv
#:include kv/AboutSciLibra.kv
#:include kv/SearchScreen.kv
#:include kv/PopUpMessage.kv
#:include kv/LibraryListView.kv
#:include kv/LibraryTooltip.kv
#:include kv/UpdateFolderPath.kv
#:include kv/YesNoDialog.kv
#:include kv/LoadDialog.kv
#:include kv/LoadProgressBar.kv


<MainScreen>:
    name: 'main'
    article_info: article_info
    menu_bar: menu_bar
    # tree_view: tree_view
    # list_tool: list_tool
    # scroll_tool: scroll_tool
    GridLayout:
        cols: 1
        rows: 2
        MenuBar:
            height: 40
            id: menu_bar
            pos: 0, root.height - self.height
        GridLayout:
            cols: 2
            rows: 1
            GridLayout:
                cols: 1
                rows: 2
                # orientation: 'vertical'
                LibraryListView:
                    id: library_view
                # grey background
                BoxLayout:
                    size_hint_y: None
                    width: 400
                    # fill the space
                    height: 50
                    canvas.before:
                        Color:
                            rgba: 0.8, 0.8, 0.8, 1
                        Rectangle:
                            pos: self.pos
                            size: self.size
                    Button:
                        text: 'Search'
                        # back ground image
                        background_color: 0.678, 0.847, 0.902, 1
                        # on_release: root.parent.manager.main_screen.ids.menu_bar.show_search()
                        # size_hint_x: 0.3
                    Button:
                        text: 'next'
                        # back ground image
                        background_color: 0.678, 0.847, 0.902, 1
                        on_release: root.nextPage()
                        # size_hint_x: 0.3
                    Button:
                        text: 'previous'
                        # redish background
                        background_color: 0.678, 0.847, 0.902, 1
                        on_release: root.previousPage()
                        # size_hint_x: 0.3
            # Article Info
            GridLayout:
                cols: 1
                rows: 2
                RstDocument:
                    id: article_info
                    text: 'Please select an article'
                # Article Actions
                BoxLayout:
                    size_hint_y: None
                    height: 50
                    width: 120
                    canvas.before:
                        Color:
                            rgba: 0.8, 0.8, 0.8, 1
                        Rectangle:
                            pos: self.pos
                            size: self.size
                    Button:
                        # back ground image
                        text: 'Open'
                        #rgb(173,255,47)
                        background_color: 0.678, 0.847, 0.902, 1
                        on_release: root.parent.open_article()
                    Button:
                        text: 'Edit'
                        #rgb(173,255,47)
                        background_color: 0.678, 0.847, 0.902, 1
                        # on_release: root.edit_article()
                        on_release: root.edit_article()
                    Button:
                        text: 'Delete'
                        #rgb(173,255,47)
                        background_color: 0.678, 0.847, 0.902, 1
                        on_release: root.delete_article()

<EditScreen>:
    name: 'Edit'
    # labels and text boxes for article information
    article_info: article_info
    GridLayout:
        cols: 1
        rows: 3
        TextInput:
            id: article_info
            multiline: True
            text: 'Please select an article'
            # light grey
            background_color: 0.8, 0.8, 0.8, 1
        BoxLayout:
            size_hint_y: None
            height: 50
            width: 120
            # fill the space
            Button:
                # back ground image
                text: 'Update'
                #rgb(173,255,47)
                background_color: 0.678, 0.847, 0.902, 1
                on_release: root.update_article()
            Button:
                text: 'Cancel'
                #rgb(173,255,47)
                background_color: 0.678, 0.847, 0.902, 1
                on_release: root.manager.current = 'main'

<SciLibraScreenManager>:
    MainScreen:
        id: main_screen
        name: 'main'
    EditScreen:
        id: Edit_screen
        name: 'Edit'
    SearchScreen:
        id: Search_screen
        name: 'search'